<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <title>Mundo Invertido | na semana menino Kelvin</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <style>
        /* Estilos para o modal de permissão */
        .audio-permission-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            color: white;
            font-family: Arial, sans-serif;
        }
        .audio-permission-modal.hidden {
            display: none;
        }
        .permission-button {
            padding: 12px 24px;
            margin-top: 20px;
            background: #ff0055;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
    </style>
</head>
    
<body class="light-theme" aria-label="O site está utilizando o tema light" role="body">
    <!-- Modal de permissão de áudio -->
    <div id="audioPermissionModal" class="audio-permission-modal">
        <h2>Permissão de Áudio Necessária</h2>
        <p>Para uma experiência completa, permita a reprodução de áudio no seu navegador.</p>
        <button id="permissionButton" class="permission-button">Permitir Áudio</button>
    </div>

    <!-- Elementos de áudio -->
    <audio id="music-normal" src="assets/musics/normal-world.mp3" loop preload="auto"></audio>
    <audio id="music-inverted" src="assets/musics/inverted-world.mp3" loop preload="auto"></audio>
    
    <header aria-label="Cabeçalho da página.">
        <div class="header-content">
            <img class="invert-element" src="assets/images/banner/logo.svg" alt="Imagem principal Mundo Invertido. Semana Frontend DIO." />
            <p class="invert-element" role="text">
              Uma jornada para quem não tem medo do desconhecido. O caminho para o
              Mundo invertido é incerto, repleto de obstáculos e perigos. Porém, a
              recompensa é grande: salvar Hawkings e o mundo todo das garras de
              Vecna. Você está preparado? Então clique no botão abaixo para entrar
              no Mundo Invertido!
            </p>
            <button id="switch-theme-button">Inverter Mundos do Alvaro</button>
        </div>

        <div id="top-characters" class="world-characters"></div>
    </header>

    <main>
      <div id="bottom-characters" class="world-characters"></div>

      <section id="section-inverted-world" class="container">
        <div class="section-texts">
          <h2>O Mundo Invertido do Alvaro</h2>
          <p role="text">
            O Mundo Invertido parece uma cópia do nosso mundo, mas com criaturas
            horrendas, tempestades assustadoras, muita escuridão e entidades
            malignas. Um reino controlado por Vecna, que tem planos de trazer
            tudo isso ao nosso mundo.
          </p>
        </div>

        <img class="invert-element" src="assets/images/content/inverted-world.png" alt="Image ilustrativa do Mundo Invertido" />
      </section>

      <section id="section-stranger-things-trailer" class="container">
        <div class="video-frame" aria-hidden="true">
          <iframe 
            width="560" 
            height="315" 
            src="https://www.youtube.com/embed/czgku_aEGoc" 
            title="YouTube video player" 
            frameborder="0" 
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
            allowfullscreen>
          </iframe>
        </div>

        <div class="section-texts">
          <h2>Stranger Things Vol. 2</h2>
          <p role="text">
            Avançando para 1984, os cidadãos de Hawkins tentam seguir em frente após os horrores que aconteceram no primeiro ano da série. 
            Will Byers foi resgatado do Mundo Invertido, mas uma entidade maior e mais sinistra ainda ameaça aqueles que sobreviveram.
          </p>
        </div>
      </section>

      <section id="section-stranger-things-gallery">
        <div class="container section-text">
          <h2>A segunda série mais assistida da Netflix</h2>
          <ul class="gallery-container" role="gallery">
            <li class="gallery-image invert-element">
              <img src="assets/images/content/st-temp1.jpg" alt="Imagem de Vecna" />
            </li>
            <li class="gallery-image invert-element">
              <img src="assets/images/content/st-temp2.jpg" alt="Imagem ilustrativa dos amigos de Eleven" />
            </li>
            <li class="gallery-image invert-element">
              <img src="assets/images/content/st-temp3.gif" alt="Imagem Eleven assustada" />
            </li>
            <li class="gallery-image invert-element">
              <img src="assets/images/content/maxevecna.jpg" alt="Imagem Eleven assustada" />
            </li>
          </ul>
        </div>
      </section>

      <section id="section-form" class="container">
        <h2>Hellfire Club</h2>
        <p>
          Eddie Munson, o líder do Hellfire Club do Hawkins High School convida você para embarcar em uma grande aventura. Nosso clube secreto,
          é um espaço criado para jogadores de RPG onde realizamos partidas emocionantes e travamos batalhas épicas para derrotar Vecna e seus aliados. 
        </p>

        <div class="form-content">
          <h3>Entre para o Hellfire CLUB e tenha experiências de <span>outro mundo<span></span></h3>

          <div class="form-container">
            <form>
              <label for="name">Nome Completo</label>
              <input type="text" name="name" id="txtName">
          
              <label for="email">E-mail</label>
              <input type="email" name="email" id="txtEmail">
          
              <label for="level">Level</label>
              <input type="text" name="level" id="txtLevel">
          
              <label for="character">Personagem</label>
              <textarea name="character" cols="30" rows="10" id="txtCharacter"></textarea>
            
              <button type="button" id="btnSubscribe">Me inscrever</button>
            </form>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <p>
        Projeto construído para fins didáticos, com o objetivo de colocar em
        prática os conhecimentos de HTML, CSS e JavaScript aprendidos na PQP.
        Desenvolvido por: Orion Constelation | @YsneshY
      </p>
    </footer>
    
    <script>
        // Elementos de áudio e controle
        const musicNormal = document.getElementById('music-normal');
        const musicInverted = document.getElementById('music-inverted');
        const switchButton = document.getElementById('switch-theme-button');
        const permissionModal = document.getElementById('audioPermissionModal');
        const permissionButton = document.getElementById('permissionButton');
        
        // Estado do mundo e controle de música
        let currentWorld = 'normal';
        let audioEnabled = false;
        
        // Configuração inicial
        musicNormal.volume = 0.5;
        musicInverted.volume = 0.5;
        
        // Função para tentar reproduzir áudio
        function tryPlayAudio() {
            if (currentWorld === 'normal') {
                musicNormal.play()
                    .then(() => {
                        audioEnabled = true;
                        permissionModal.classList.add('hidden');
                    })
                    .catch(e => {
                        console.log("Permissão de áudio necessária");
                        permissionModal.classList.remove('hidden');
                    });
            } else {
                musicInverted.play()
                    .then(() => {
                        audioEnabled = true;
                        permissionModal.classList.add('hidden');
                    })
                    .catch(e => {
                        console.log("Permissão de áudio necessária");
                        permissionModal.classList.remove('hidden');
                    });
            }
        }
        
        // Função para alternar mundos
        function switchWorld() {
            // Pausa a música atual
            musicNormal.pause();
            musicInverted.pause();
            
            // Alterna o mundo
            currentWorld = currentWorld === 'normal' ? 'inverted' : 'normal';
            
            // Atualiza o tema visual
            document.body.classList.toggle('dark-theme');
            document.body.classList.toggle('light-theme');
            
            // Toca a música correspondente
            if (audioEnabled) {
                if (currentWorld === 'normal') {
                    musicNormal.currentTime = 0;
                    musicNormal.play().catch(e => console.log("Erro na música normal:", e));
                } else {
                    musicInverted.currentTime = 0;
                    musicInverted.play().catch(e => console.log("Erro na música invertida:", e));
                }
            }
        }
        
        // Event listeners
        permissionButton.addEventListener('click', () => {
            tryPlayAudio();
        });
        
        switchButton.addEventListener('click', switchWorld);
        
        // Inicia a música normal após interação
        document.addEventListener('click', function initMusic() {
            tryPlayAudio();
            document.removeEventListener('click', initMusic);
        }, { once: true });
        
        // Verifica se há suporte a autoplay
        document.addEventListener('DOMContentLoaded', () => {
            // Esconde o modal se o áudio já estiver habilitado
            const testAudio = new Audio();
            testAudio.volume = 0;
            testAudio.play()
                .then(() => {
                    audioEnabled = true;
                    permissionModal.classList.add('hidden');
                })
                .catch(() => {
                    permissionModal.classList.remove('hidden');
                });
        });
    </script>
</body>
</html>